# Учебный проект на Drupal
__Идея:__ Реализовать сайт табельного учета рабочих дней сотрудников.

__Тестовый адрес:__ http://drupal.srv-t.pp.ua/otdely

## 1. Part 1 - "Drupal 8 - Beginner"

Реализовано:
### 1. Создана сущность **"sotrudnik"** с полями:
  - Дата рождения
  - Отдел (таксономия)
  - Страна (плагином)
  - Ф.И.О.
  - Фото сотрудника
  - Был на работе (обрабатывается плагином)
### 2. Создана таксономия **"Отдел"**
### 3. Локально cгенерировались данные модулем DEVEL
### 4. Для таксономии  **"Отдел"** создано представление  ([Отделы](http://drupal.srv-t.pp.ua/otdely))
### 5. Созданы и привязаны две страницы:
  - Главная
  - About us
### 6. Все правки закомичены и запушены на github


## 2. Part 2 - "Drupal 8 - let’s practice"

Реализовано:
### 1. Создана своя тема **"HRD"**  на основе **'bartik'**
  - cконфигурирован twig
  - подключены свои стили
  - использовано два хука (доавбление данных и перегрузка темплейта для меню)
  - перегружены темплейты:
    - корневой
    - отдельно для страниц
    - отдельно для главной
    - для своего меню
    - для нод
  - добавлена своя настройка темы, со значением по умолчанию
  
### 2. Создан модуль **"report_cart_block"**. 

Цель модуля, оформить вывод дат посещений текущего месяца
![Report Cart](https://image.prntscr.com/image/ISQz3vIrSCSW9_3waClYkQ.png)
    
В модуле реализовано:
  - свой темплейт через хук
  - подключены стили 
  - реализован свой хух изменения даты
  

## 3. Part 3 - "Drupal 8 - Practice makes perfect..."

### 1. Реализован модуль для работы через REST запросы.

В модуле реализовано:
####   1.1. Получение всех дат связанных с данным сотрудником
  
  __Запрос GET__:  http://drupal.srv-t.pp.ua/rc-rest/get.json?nid=2
  
  где **nid** - id ноды сотрудника
  
  __Ответ:__
```json
{
    "success": true,
    "work_days": [
        "2019-03-01",
        "2019-03-02",
        "2019-03-03",
        "2019-03-04",
        "2019-03-08"
    ]
}
```
  
  в случае не корректного ИД или если нода не содержит поля с датами
```json
{
    "success": false,
    "error": "No id or wrong type"
}
```
==============================================

####   1.2 запрос POST - добавление рабочих дней связанных с данным сотрудником
  
  __Запрос POST__:  http://drupal.srv-t.pp.ua/rc-rest/post.json
  
  В заголовке указываем: **Content-Type: application/json** 
  
  Без заголовка, данные не добавятся
  
  В теле:
  - обязательный параметр **nid** - id ноды
  - не обязательный массив **dates** - даты которые добавляем, в случае отсутвия, добавит сегодняшнюю
```json
{
    "nid": "1", 
    "dates":[
        "2019-03-01",
        "2019-03-02",
        "2019-03-03",
        "2019-03-04",
        "2019-03-08"
    ]
}
```

  в ответ получим схожий JSON с GET-запросом:
```json
{
    "work_days": [
        "2019-03-11",
        "2019-03-01",
        "2019-03-02",
        "2019-03-03",
        "2019-03-04",
        "2019-03-08",
        "2019-03-01",
        "2019-03-02",
        "2019-03-03",
        "2019-03-04",
        "2019-03-08"
    ],
    "success": true
}
```
  как видно из ответа, данные не проверяются на дубли, так же не реализована ацтентификация.
  
  В случае не корректного ИД или если нода не содержит поля с датами
```json
{
    "success": false,
    "error": "No id or wrong type"
}
```

### 2. Проект развернут на тестовом хостинге по адресу
http://drupal.srv-t.pp.ua/otdely

### 3. В процессе изучения Drupal было реализовано еще ряд плагинов по учебным пособиям
  1. **ITC** - плагин добавляет поле выпадающий список со страной
  2. **intro_config** - плагин управляет настройкой темы
  3. **pages** - плагин выводит свой контент в своем шаблоне
  4. **dummy** - плагин добавляет/удаляет/модицирует сообщения, демонструю работу с хуками как системными так и своими
  
  
## 4. Источники информации
### 4.1. Видео
  - [Работа с CMS](https://www.youtube.com/watch?v=stfyr0757ts&list=PLZUvYKTHPVZogoz7LSXFmewxAOW8dM36F)
  - [Создание темы с нуля](https://www.youtube.com/watch?v=0LZXaEqswkM&list=PLvPEqBMxxGDU_2p4pe2uXaWszFIKjnIAA)
  - [Создание модуля с произвольным типом](https://www.youtube.com/watch?v=0f4CYCbJ4B4&list=PLvPEqBMxxGDUIGLPPueWSQNr3dJhtyAD3)
  - [Создание модуля вывода контента](https://www.youtube.com/watch?v=aD3gXKBhtxk&index=8&t=5s&list=PLVw90oqn61RsjexhkwsC3JHcPj8Enm2Gn)
  - [Работа с хуками](https://www.youtube.com/watch?v=RCiPmxaqeEk&list=PLu13hPnba_XArEuvxJC2Ao-6jO4nXGAUQ&index=6)
  
### 4.2. Статьи
  - [niklan.net - подорбные статьи](https://niklan.net/blog/184)
  - [drupalfly.ru - короткие статьи с примерами](https://drupalfly.ru/lesson)
  - [drupalbook.ru - руководство по DRUPAL на русском](http://drupalbook.ru/drupal/12111-obrashchenie-k-polyam-v-entity)
